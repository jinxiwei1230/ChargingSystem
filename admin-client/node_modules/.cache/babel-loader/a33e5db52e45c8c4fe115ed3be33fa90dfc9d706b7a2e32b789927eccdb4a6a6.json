{"ast":null,"code":"export default {\n  name: 'ChargingDetails',\n  data() {\n    return {\n      loading: false,\n      dateRange: [],\n      searchKeyword: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      details: [],\n      dialogVisible: false,\n      currentDetail: null,\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', [start, end]);\n          }\n        }]\n      }\n    };\n  },\n  computed: {\n    filteredDetails() {\n      return this.details.filter(detail => detail.id.toLowerCase().includes(this.searchKeyword.toLowerCase()) || detail.username.toLowerCase().includes(this.searchKeyword.toLowerCase()));\n    }\n  },\n  methods: {\n    handleDateChange() {\n      this.fetchDetails();\n    },\n    handleSearch() {\n      this.currentPage = 1;\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.fetchDetails();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchDetails();\n    },\n    async fetchDetails() {\n      this.loading = true;\n      try {\n        // 这里应该调用API获取详单数据\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        this.details = [{\n          id: 'CD001',\n          username: 'user001',\n          createTime: '2024-03-15 10:00:00',\n          pileId: 'A',\n          power: 30,\n          duration: 1,\n          startTime: '2024-03-15 10:00:00',\n          endTime: '2024-03-15 11:00:00',\n          chargingFee: 30,\n          serviceFee: 24,\n          totalFee: 54\n        }\n        // 更多数据...\n        ];\n        this.total = this.details.length;\n      } catch (error) {\n        this.$message.error('获取详单失败：' + error.message);\n      } finally {\n        this.loading = false;\n      }\n    },\n    showDetail(row) {\n      this.currentDetail = row;\n      this.dialogVisible = true;\n    },\n    exportDetails() {\n      this.$message.success('数据导出成功');\n    }\n  },\n  created() {\n    this.fetchDetails();\n  }\n};","map":{"version":3,"names":["name","data","loading","dateRange","searchKeyword","currentPage","pageSize","total","details","dialogVisible","currentDetail","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","computed","filteredDetails","filter","detail","id","toLowerCase","includes","username","methods","handleDateChange","fetchDetails","handleSearch","handleSizeChange","val","handleCurrentChange","Promise","resolve","setTimeout","createTime","pileId","power","duration","startTime","endTime","chargingFee","serviceFee","totalFee","length","error","$message","message","showDetail","row","exportDetails","success","created"],"sources":["src/views/ChargingDetails.vue"],"sourcesContent":["<template>\r\n    <div class=\"charging-details-container\">\r\n      <el-card>\r\n        <div slot=\"header\" class=\"header\">\r\n          <span>充电详单</span>\r\n          <div class=\"header-actions\">\r\n            <el-date-picker\r\n              v-model=\"dateRange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :picker-options=\"pickerOptions\"\r\n              @change=\"handleDateChange\">\r\n            </el-date-picker>\r\n            <el-input\r\n              v-model=\"searchKeyword\"\r\n              placeholder=\"搜索详单编号/用户名\"\r\n              style=\"width: 200px; margin-left: 10px\"\r\n              @input=\"handleSearch\">\r\n            </el-input>\r\n            <el-button type=\"primary\" @click=\"exportDetails\" style=\"margin-left: 10px\">\r\n              导出数据\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n        \r\n        <el-table\r\n          :data=\"filteredDetails\"\r\n          style=\"width: 100%\"\r\n          v-loading=\"loading\">\r\n          <el-table-column\r\n            prop=\"id\"\r\n            label=\"详单编号\"\r\n            width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"用户名\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"createTime\"\r\n            label=\"生成时间\"\r\n            width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"pileId\"\r\n            label=\"充电桩编号\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"power\"\r\n            label=\"充电电量(度)\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"duration\"\r\n            label=\"充电时长(小时)\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"startTime\"\r\n            label=\"启动时间\"\r\n            width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"endTime\"\r\n            label=\"停止时间\"\r\n            width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"chargingFee\"\r\n            label=\"充电费用(元)\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"serviceFee\"\r\n            label=\"服务费用(元)\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"totalFee\"\r\n            label=\"总费用(元)\"\r\n            width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作\"\r\n            width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"showDetail(scope.row)\">\r\n                详情\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        \r\n        <div class=\"pagination-container\">\r\n          <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <!-- 详情对话框 -->\r\n      <el-dialog\r\n        title=\"充电详单详情\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"50%\">\r\n        <div v-if=\"currentDetail\" class=\"detail-content\">\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">详单编号：</span>\r\n            <span class=\"value\">{{ currentDetail.id }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">用户名：</span>\r\n            <span class=\"value\">{{ currentDetail.username }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">充电桩编号：</span>\r\n            <span class=\"value\">{{ currentDetail.pileId }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">充电电量：</span>\r\n            <span class=\"value\">{{ currentDetail.power }}度</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">充电时长：</span>\r\n            <span class=\"value\">{{ currentDetail.duration }}小时</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">启动时间：</span>\r\n            <span class=\"value\">{{ currentDetail.startTime }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">停止时间：</span>\r\n            <span class=\"value\">{{ currentDetail.endTime }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">充电费用：</span>\r\n            <span class=\"value\">¥{{ currentDetail.chargingFee }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">服务费用：</span>\r\n            <span class=\"value\">¥{{ currentDetail.serviceFee }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">总费用：</span>\r\n            <span class=\"value\">¥{{ currentDetail.totalFee }}</span>\r\n          </div>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'ChargingDetails',\r\n    data() {\r\n      return {\r\n        loading: false,\r\n        dateRange: [],\r\n        searchKeyword: '',\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n        details: [],\r\n        dialogVisible: false,\r\n        currentDetail: null,\r\n        pickerOptions: {\r\n          shortcuts: [{\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          }, {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      filteredDetails() {\r\n        return this.details.filter(detail => \r\n          detail.id.toLowerCase().includes(this.searchKeyword.toLowerCase()) ||\r\n          detail.username.toLowerCase().includes(this.searchKeyword.toLowerCase())\r\n        )\r\n      }\r\n    },\r\n    methods: {\r\n      handleDateChange() {\r\n        this.fetchDetails()\r\n      },\r\n      handleSearch() {\r\n        this.currentPage = 1\r\n      },\r\n      handleSizeChange(val) {\r\n        this.pageSize = val\r\n        this.fetchDetails()\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.currentPage = val\r\n        this.fetchDetails()\r\n      },\r\n      async fetchDetails() {\r\n        this.loading = true\r\n        try {\r\n          // 这里应该调用API获取详单数据\r\n          await new Promise(resolve => setTimeout(resolve, 1000))\r\n          this.details = [\r\n            {\r\n              id: 'CD001',\r\n              username: 'user001',\r\n              createTime: '2024-03-15 10:00:00',\r\n              pileId: 'A',\r\n              power: 30,\r\n              duration: 1,\r\n              startTime: '2024-03-15 10:00:00',\r\n              endTime: '2024-03-15 11:00:00',\r\n              chargingFee: 30,\r\n              serviceFee: 24,\r\n              totalFee: 54\r\n            }\r\n            // 更多数据...\r\n          ]\r\n          this.total = this.details.length\r\n        } catch (error) {\r\n          this.$message.error('获取详单失败：' + error.message)\r\n        } finally {\r\n          this.loading = false\r\n        }\r\n      },\r\n      showDetail(row) {\r\n        this.currentDetail = row\r\n        this.dialogVisible = true\r\n      },\r\n      exportDetails() {\r\n        this.$message.success('数据导出成功')\r\n      }\r\n    },\r\n    created() {\r\n      this.fetchDetails()\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .charging-details-container {\r\n    padding: 20px;\r\n  }\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  .header-actions {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .pagination-container {\r\n    margin-top: 20px;\r\n    text-align: right;\r\n  }\r\n  .detail-content {\r\n    padding: 20px;\r\n  }\r\n  .detail-item {\r\n    margin: 15px 0;\r\n    font-size: 16px;\r\n  }\r\n  .label {\r\n    color: #606266;\r\n    margin-right: 10px;\r\n  }\r\n  .value {\r\n    color: #303133;\r\n    font-weight: bold;\r\n  }\r\n  </style>"],"mappings":"AAqKA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;MACAC,aAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;MACAC,OAAA;MACAC,aAAA;MACAC,aAAA;MACAC,aAAA;QACAC,SAAA;UACAC,IAAA;UACAC,QAAAC,MAAA;YACA,MAAAC,GAAA,OAAAC,IAAA;YACA,MAAAC,KAAA,OAAAD,IAAA;YACAC,KAAA,CAAAC,OAAA,CAAAD,KAAA,CAAAE,OAAA;YACAL,MAAA,CAAAM,KAAA,UAAAH,KAAA,EAAAF,GAAA;UACA;QACA;UACAH,IAAA;UACAC,QAAAC,MAAA;YACA,MAAAC,GAAA,OAAAC,IAAA;YACA,MAAAC,KAAA,OAAAD,IAAA;YACAC,KAAA,CAAAC,OAAA,CAAAD,KAAA,CAAAE,OAAA;YACAL,MAAA,CAAAM,KAAA,UAAAH,KAAA,EAAAF,GAAA;UACA;QACA;MACA;IACA;EACA;EACAM,QAAA;IACAC,gBAAA;MACA,YAAAf,OAAA,CAAAgB,MAAA,CAAAC,MAAA,IACAA,MAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAC,QAAA,MAAAxB,aAAA,CAAAuB,WAAA,OACAF,MAAA,CAAAI,QAAA,CAAAF,WAAA,GAAAC,QAAA,MAAAxB,aAAA,CAAAuB,WAAA,GACA;IACA;EACA;EACAG,OAAA;IACAC,iBAAA;MACA,KAAAC,YAAA;IACA;IACAC,aAAA;MACA,KAAA5B,WAAA;IACA;IACA6B,iBAAAC,GAAA;MACA,KAAA7B,QAAA,GAAA6B,GAAA;MACA,KAAAH,YAAA;IACA;IACAI,oBAAAD,GAAA;MACA,KAAA9B,WAAA,GAAA8B,GAAA;MACA,KAAAH,YAAA;IACA;IACA,MAAAA,aAAA;MACA,KAAA9B,OAAA;MACA;QACA;QACA,UAAAmC,OAAA,CAAAC,OAAA,IAAAC,UAAA,CAAAD,OAAA;QACA,KAAA9B,OAAA,IACA;UACAkB,EAAA;UACAG,QAAA;UACAW,UAAA;UACAC,MAAA;UACAC,KAAA;UACAC,QAAA;UACAC,SAAA;UACAC,OAAA;UACAC,WAAA;UACAC,UAAA;UACAC,QAAA;QACA;QACA;QAAA,CACA;QACA,KAAAzC,KAAA,QAAAC,OAAA,CAAAyC,MAAA;MACA,SAAAC,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA,aAAAA,KAAA,CAAAE,OAAA;MACA;QACA,KAAAlD,OAAA;MACA;IACA;IACAmD,WAAAC,GAAA;MACA,KAAA5C,aAAA,GAAA4C,GAAA;MACA,KAAA7C,aAAA;IACA;IACA8C,cAAA;MACA,KAAAJ,QAAA,CAAAK,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAzB,YAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}