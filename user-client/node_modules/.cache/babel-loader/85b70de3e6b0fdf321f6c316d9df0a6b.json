{"remainingRequest":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\babel-loader\\lib\\index.js!D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\git_project\\ChargingSystem\\user-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\git_project\\ChargingSystem\\user-client\\src\\views\\ChargingDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\git_project\\ChargingSystem\\user-client\\src\\views\\ChargingDetails.vue","mtime":1749311366733},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749209592798},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1749209593164},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749209592798},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\vue-loader\\lib\\index.js","mtime":1749209591090},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749209592798},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1749209593164},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749209592798},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\vue-loader\\lib\\index.js","mtime":1749209591090}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0VXNlck9yZGVycywgZ2V0T3JkZXJJbmZvLCBnZXRPcmRlckRldGFpbExpc3QgfSBmcm9tICdAL2FwaS91c2VyLWJpbGwnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hhcmdpbmdEZXRhaWxzJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRhdGVSYW5nZTogW10sCiAgICAgIHNlYXJjaEtleXdvcmQ6ICcnLAogICAgICBvcmRlclN0YXR1czogJycsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsOiAwLAogICAgICBvcmRlcnNMaXN0OiBbXSwKICAgICAgYWxsT3JkZXJzOiBbXSwKICAgICAgb3JkZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgY3VycmVudE9yZGVyOiBudWxsLAogICAgICBvcmRlckRldGFpbHM6IFtdLAogICAgICBwaWNrZXJPcHRpb25zOiB7CiAgICAgICAgc2hvcnRjdXRzOiBbewogICAgICAgICAgdGV4dDogJ+acgOi/keS4gOWRqCcsCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgewogICAgICAgICAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIHN0YXJ0LnNldFRpbWUoc3RhcnQuZ2V0VGltZSgpIC0gMzYwMCAqIDEwMDAgKiAyNCAqIDcpOwogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBbc3RhcnQsIGVuZF0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIHRleHQ6ICfmnIDov5HkuIDkuKrmnIgnLAogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsKICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiAzMCk7CiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIFtzdGFydCwgZW5kXSk7CiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsndXNlcklkJ10pCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQZXJpb2RUeXBlVGV4dCh0eXBlKSB7CiAgICAgIGNvbnN0IHR5cGVNYXAgPSB7CiAgICAgICAgJ1BFQUsnOiAn5bOw5pe2JywKICAgICAgICAnU1RBTkRBUkQnOiAn5bmz5pe2JywKICAgICAgICAnVkFMTEVZJzogJ+iwt+aXticKICAgICAgfTsKICAgICAgcmV0dXJuIHR5cGVNYXBbdHlwZV0gfHwgdHlwZTsKICAgIH0sCiAgICBnZXRTdGF0dXNUZXh0KHN0YXR1cykgewogICAgICBjb25zdCBzdGF0dXNNYXAgPSB7CiAgICAgICAgJ0NSRUFURUQnOiAn5bey5Yib5bu6JywKICAgICAgICAnQ0hBUkdJTkcnOiAn5YWF55S15LitJywKICAgICAgICAnQ09NUExFVEVEJzogJ+W3suWujOaIkCcsCiAgICAgICAgJ0NBTkNFTExFRCc6ICflt7Llj5bmtognLAogICAgICAgICdGQVVMVEVEJzogJ+aVhemanCcKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdIHx8IHN0YXR1czsKICAgIH0sCiAgICBnZXRTdGF0dXNUeXBlKHN0YXR1cykgewogICAgICBjb25zdCB0eXBlTWFwID0gewogICAgICAgICdDUkVBVEVEJzogJ2luZm8nLAogICAgICAgICdDSEFSR0lORyc6ICdzdWNjZXNzJywKICAgICAgICAnQ09NUExFVEVEJzogJycsCiAgICAgICAgJ0NBTkNFTExFRCc6ICdkYW5nZXInLAogICAgICAgICdGQVVMVEVEJzogJ3dhcm5pbmcnCiAgICAgIH07CiAgICAgIHJldHVybiB0eXBlTWFwW3N0YXR1c10gfHwgJyc7CiAgICB9LAogICAgZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWVTdHIpIHsKICAgICAgaWYgKCFkYXRlVGltZVN0cikgcmV0dXJuICctJzsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVUaW1lU3RyKTsKICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVTdHJpbmcoKTsKICAgIH0sCiAgICBoYW5kbGVEYXRlQ2hhbmdlKCkgewogICAgICB0aGlzLmFwcGx5RmlsdGVycygpOwogICAgfSwKICAgIGhhbmRsZVNlYXJjaCgpIHsKICAgICAgdGhpcy5hcHBseUZpbHRlcnMoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmFwcGx5RmlsdGVycygpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzKCk7CiAgICB9LAogICAgYXN5bmMgZmV0Y2hPcmRlcnMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKCF0aGlzLnVzZXJJZCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign55So5oi35pyq55m75b2VJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICBzaXplOiB0aGlzLnBhZ2VTaXplCiAgICAgICAgfTsKICAgICAgICBpZiAodGhpcy5vcmRlclN0YXR1cykgewogICAgICAgICAgcGFyYW1zLnN0YXR1cyA9IHRoaXMub3JkZXJTdGF0dXM7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmRhdGVSYW5nZSAmJiB0aGlzLmRhdGVSYW5nZS5sZW5ndGggPT09IDIpIHsKICAgICAgICAgIHBhcmFtcy5zdGFydERhdGUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlUmFuZ2VbMF0pOwogICAgICAgICAgcGFyYW1zLmVuZERhdGUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlUmFuZ2VbMV0pOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFVzZXJPcmRlcnModGhpcy51c2VySWQsIHBhcmFtcyk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5vcmRlcnNMaXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzOwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAn6I635Y+W6K6i5Y2V5YiX6KGo5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluiuouWNleWIl+ihqOWksei0pe+8micgKyBlcnJvci5tZXNzYWdlKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICBjb25zdCBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgIGxldCBtb250aCA9ICcnICsgKGQuZ2V0TW9udGgoKSArIDEpOwogICAgICBsZXQgZGF5ID0gJycgKyBkLmdldERhdGUoKTsKICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTsKICAgICAgaWYgKG1vbnRoLmxlbmd0aCA8IDIpIG1vbnRoID0gJzAnICsgbW9udGg7CiAgICAgIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gJzAnICsgZGF5OwogICAgICByZXR1cm4gW3llYXIsIG1vbnRoLCBkYXldLmpvaW4oJy0nKTsKICAgIH0sCiAgICBhcHBseUZpbHRlcnMoKSB7CiAgICAgIHRoaXMuZmV0Y2hPcmRlcnMoKTsKICAgIH0sCiAgICBhc3luYyBzaG93T3JkZXJEZXRhaWwocm93KSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgW29yZGVyUmVzcG9uc2UsIGRldGFpbHNSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbZ2V0T3JkZXJJbmZvKHJvdy5vcmRlcklkKSwgZ2V0T3JkZXJEZXRhaWxMaXN0KHJvdy5vcmRlcklkKV0pOwogICAgICAgIGlmIChvcmRlclJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5jdXJyZW50T3JkZXIgPSBvcmRlclJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3Iob3JkZXJSZXNwb25zZS5tZXNzYWdlIHx8ICfojrflj5borqLljZXor6bmg4XlpLHotKUnKTsKICAgICAgICB9CiAgICAgICAgaWYgKGRldGFpbHNSZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMub3JkZXJEZXRhaWxzID0gZGV0YWlsc1Jlc3BvbnNlLmRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMub3JkZXJEZXRhaWxzID0gW107CiAgICAgICAgfQogICAgICAgIHRoaXMub3JkZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5borqLljZXor6bmg4XlpLHotKXvvJonICsgZXJyb3IubWVzc2FnZSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoT3JkZXJzKCk7CiAgfQp9Ow=="},{"version":3,"names":["getUserOrders","getOrderInfo","getOrderDetailList","mapGetters","name","data","loading","dateRange","searchKeyword","orderStatus","currentPage","pageSize","total","ordersList","allOrders","orderDialogVisible","currentOrder","orderDetails","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","computed","methods","getPeriodTypeText","type","typeMap","getStatusText","status","statusMap","getStatusType","formatDateTime","dateTimeStr","date","toLocaleString","handleDateChange","applyFilters","handleSearch","handleSizeChange","val","handleCurrentChange","fetchOrders","userId","$message","error","params","page","size","length","startDate","formatDate","endDate","response","code","records","message","d","month","getMonth","day","getDate","year","getFullYear","join","showOrderDetail","row","orderResponse","detailsResponse","Promise","all","orderId","created"],"sources":["src/views/ChargingDetails.vue"],"sourcesContent":["<template>\n  <div class=\"charging-details-container\">\n    <el-card>\n      <div slot=\"header\" class=\"header\">\n        <span>充电订单列表</span>\n        <div class=\"header-actions\">\n          <el-select v-model=\"orderStatus\" placeholder=\"订单状态\" style=\"width: 120px; margin-right: 10px\">\n            <el-option label=\"全部\" value=\"\"></el-option>\n            <el-option label=\"已创建\" value=\"CREATED\"></el-option>\n            <el-option label=\"充电中\" value=\"CHARGING\"></el-option>\n            <el-option label=\"已完成\" value=\"COMPLETED\"></el-option>\n            <el-option label=\"已取消\" value=\"CANCELLED\"></el-option>\n            <el-option label=\"故障\" value=\"FAULTED\"></el-option>\n          </el-select>\n          <el-date-picker\n            v-model=\"dateRange\"\n            type=\"daterange\"\n            range-separator=\"至\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            :picker-options=\"pickerOptions\"\n            @change=\"handleDateChange\">\n          </el-date-picker>\n          <el-input\n            v-model=\"searchKeyword\"\n            placeholder=\"搜索订单编号\"\n            style=\"width: 200px; margin-left: 10px\"\n            @input=\"handleSearch\">\n          </el-input>\n        </div>\n      </div>\n      \n      <el-table\n        :data=\"ordersList\"\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n        @row-click=\"showOrderDetail\">\n        <el-table-column\n          prop=\"orderId\"\n          label=\"订单编号\"\n          width=\"180\">\n        </el-table-column>\n        <el-table-column\n          prop=\"pileId\"\n          label=\"充电桩编号\"\n          width=\"120\">\n        </el-table-column>\n        <el-table-column\n          prop=\"carId\"\n          label=\"车牌号\"\n          width=\"120\">\n        </el-table-column>\n        <el-table-column\n          prop=\"orderStatus\"\n          label=\"订单状态\"\n          width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"getStatusType(scope.row.orderStatus)\">\n              {{ getStatusText(scope.row.orderStatus) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"totalKwh\"\n          label=\"充电量(度)\"\n          width=\"100\">\n        </el-table-column>\n        <el-table-column\n          prop=\"totalDuration\"\n          label=\"充电时长(分钟)\"\n          width=\"120\">\n        </el-table-column>\n        <el-table-column\n          prop=\"totalFee\"\n          label=\"总费用(元)\"\n          width=\"120\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.totalFee ? '¥' + scope.row.totalFee : '-' }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"startTime\"\n          label=\"开始时间\"\n          width=\"180\">\n          <template slot-scope=\"scope\">\n            {{ formatDateTime(scope.row.startTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"endTime\"\n          label=\"结束时间\"\n          width=\"180\">\n          <template slot-scope=\"scope\">\n            {{ formatDateTime(scope.row.endTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-button \n              type=\"text\" \n              size=\"small\"\n              @click.stop=\"showOrderDetail(scope.row)\">\n              查看详单\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      \n      <div class=\"pagination-container\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n        </el-pagination>\n      </div>\n    </el-card>\n    \n    <!-- 订单详情对话框 -->\n    <el-dialog\n      title=\"订单详情\"\n      :visible.sync=\"orderDialogVisible\"\n      width=\"60%\">\n      <div v-if=\"currentOrder\" class=\"detail-content\">\n        <h3>基本信息</h3>\n        <div class=\"detail-grid\">\n        <div class=\"detail-item\">\n            <span class=\"label\">订单编号：</span>\n            <span class=\"value\">{{ currentOrder.orderId }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">充电桩编号：</span>\n            <span class=\"value\">{{ currentOrder.pileId }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"label\">车牌号：</span>\n            <span class=\"value\">{{ currentOrder.carId }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"label\">订单状态：</span>\n            <span class=\"value\">\n              <el-tag :type=\"getStatusType(currentOrder.orderStatus)\">\n                {{ getStatusText(currentOrder.orderStatus) }}\n              </el-tag>\n            </span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">充电电量：</span>\n            <span class=\"value\">{{ currentOrder.totalKwh }}度</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">充电时长：</span>\n            <span class=\"value\">{{ currentOrder.totalDuration }}分钟</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">充电费用：</span>\n            <span class=\"value\">¥{{ currentOrder.totalChargeFee || '-' }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">服务费用：</span>\n            <span class=\"value\">¥{{ currentOrder.totalServiceFee || '-' }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"label\">总费用：</span>\n            <span class=\"value\">¥{{ currentOrder.totalFee || '-' }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"label\">开始时间：</span>\n            <span class=\"value\">{{ formatDateTime(currentOrder.startTime) }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"label\">结束时间：</span>\n            <span class=\"value\">{{ formatDateTime(currentOrder.endTime) }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"label\">创建时间：</span>\n            <span class=\"value\">{{ formatDateTime(currentOrder.createTime) }}</span>\n          </div>\n        </div>\n        \n        <div v-if=\"orderDetails.length > 0\" class=\"detail-list\">\n          <h3>详单列表</h3>\n          <el-table :data=\"orderDetails\" border>\n            <el-table-column prop=\"periodSeq\" label=\"时段序号\" width=\"100\"></el-table-column>\n            <el-table-column prop=\"periodType\" label=\"时段类型\" width=\"120\">\n              <template slot-scope=\"scope\">\n                {{ getPeriodTypeText(scope.row.periodType) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"开始时间\" width=\"180\">\n              <template slot-scope=\"scope\">\n                {{ formatDateTime(scope.row.startTime) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"结束时间\" width=\"180\">\n              <template slot-scope=\"scope\">\n                {{ formatDateTime(scope.row.endTime) }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"duration\" label=\"时长(分钟)\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"kwh\" label=\"充电量(度)\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"chargeRate\" label=\"充电费率\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"serviceRate\" label=\"服务费率\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"chargeFee\" label=\"充电费(元)\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"serviceFee\" label=\"服务费(元)\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"subTotal\" label=\"小计(元)\" width=\"120\"></el-table-column>\n          </el-table>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getUserOrders, getOrderInfo, getOrderDetailList } from '@/api/user-bill'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'ChargingDetails',\n  data() {\n    return {\n      loading: false,\n      dateRange: [],\n      searchKeyword: '',\n      orderStatus: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      ordersList: [],\n      allOrders: [],\n      orderDialogVisible: false,\n      currentOrder: null,\n      orderDetails: [],\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = new Date()\n            const start = new Date()\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n            picker.$emit('pick', [start, end])\n          }\n        }, {\n          text: '最近一个月',\n          onClick(picker) {\n            const end = new Date()\n            const start = new Date()\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n            picker.$emit('pick', [start, end])\n          }\n        }]\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['userId'])\n  },\n  methods: {\n    getPeriodTypeText(type) {\n      const typeMap = {\n        'PEAK': '峰时',\n        'STANDARD': '平时',\n        'VALLEY': '谷时'\n      }\n      return typeMap[type] || type\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'CREATED': '已创建',\n        'CHARGING': '充电中',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消',\n        'FAULTED': '故障'\n      }\n      return statusMap[status] || status\n    },\n    getStatusType(status) {\n      const typeMap = {\n        'CREATED': 'info',\n        'CHARGING': 'success',\n        'COMPLETED': '',\n        'CANCELLED': 'danger',\n        'FAULTED': 'warning'\n      }\n      return typeMap[status] || ''\n    },\n    formatDateTime(dateTimeStr) {\n      if (!dateTimeStr) return '-'\n      const date = new Date(dateTimeStr)\n      return date.toLocaleString()\n    },\n    handleDateChange() {\n      this.applyFilters()\n    },\n    handleSearch() {\n      this.applyFilters()\n    },\n    handleSizeChange(val) {\n      this.pageSize = val\n      this.applyFilters()\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.applyFilters()\n    },\n    async fetchOrders() {\n      this.loading = true\n      try {\n        if (!this.userId) {\n          this.$message.error('用户未登录')\n          return\n        }\n        \n        const params = {\n          page: this.currentPage,\n          size: this.pageSize\n        }\n        \n        if (this.orderStatus) {\n          params.status = this.orderStatus\n        }\n        \n        if (this.dateRange && this.dateRange.length === 2) {\n          params.startDate = this.formatDate(this.dateRange[0])\n          params.endDate = this.formatDate(this.dateRange[1])\n        }\n        \n        const response = await getUserOrders(this.userId, params)\n        if (response.code === 200) {\n          this.ordersList = response.data.records\n          this.total = response.data.total\n        } else {\n          this.$message.error(response.message || '获取订单列表失败')\n        }\n      } catch (error) {\n        this.$message.error('获取订单列表失败：' + error.message)\n      } finally {\n        this.loading = false\n      }\n    },\n    formatDate(date) {\n      const d = new Date(date)\n      let month = '' + (d.getMonth() + 1)\n      let day = '' + d.getDate()\n      const year = d.getFullYear()\n      \n      if (month.length < 2) month = '0' + month\n      if (day.length < 2) day = '0' + day\n      \n      return [year, month, day].join('-')\n    },\n    applyFilters() {\n      this.fetchOrders()\n    },\n    async showOrderDetail(row) {\n      this.loading = true\n      try {\n        const [orderResponse, detailsResponse] = await Promise.all([\n          getOrderInfo(row.orderId),\n          getOrderDetailList(row.orderId)\n        ])\n        \n        if (orderResponse.code === 200) {\n          this.currentOrder = orderResponse.data\n        } else {\n          this.$message.error(orderResponse.message || '获取订单详情失败')\n        }\n        \n        if (detailsResponse.code === 200) {\n          this.orderDetails = detailsResponse.data\n        } else {\n          this.orderDetails = []\n        }\n        \n        this.orderDialogVisible = true\n      } catch (error) {\n        this.$message.error('获取订单详情失败：' + error.message)\n      } finally {\n        this.loading = false\n      }\n    }\n  },\n  created() {\n    this.fetchOrders()\n  }\n}\n</script>\n\n<style scoped>\n.charging-details-container {\n  padding: 20px;\n}\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.header-actions {\n  display: flex;\n  align-items: center;\n}\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n.detail-content {\n  padding: 20px;\n}\n.detail-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 15px;\n  margin-bottom: 30px;\n}\n.detail-item {\n  margin: 10px 0;\n  font-size: 14px;\n}\n.label {\n  color: #606266;\n  margin-right: 10px;\n}\n.value {\n  color: #303133;\n  font-weight: bold;\n}\n.detail-list {\n  margin-top: 20px;\n}\n.el-tag {\n  margin-right: 10px;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}