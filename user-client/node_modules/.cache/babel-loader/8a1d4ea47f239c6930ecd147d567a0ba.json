{"remainingRequest":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\babel-loader\\lib\\index.js!D:\\git_project\\ChargingSystem\\user-client\\src\\store\\index.js","dependencies":[{"path":"D:\\git_project\\ChargingSystem\\user-client\\src\\store\\index.js","mtime":1749285715592},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749209592798},{"path":"D:\\git_project\\ChargingSystem\\user-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1749209593164}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgbG9naW4gfSBmcm9tICdAL2FwaS91c2VyJzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB1c2VySW5mbzogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKSkgfHwgbnVsbCwKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJywKICAgIGNoYXJnaW5nU3RhdHVzOiBudWxsLAogICAgcXVldWVJbmZvOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VU0VSX0lORk8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgICAgIGlmICh1c2VySW5mbykgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvKSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHVzZXJJbmZvLmlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlckluZm8nKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcklkJyk7CiAgICAgIH0KICAgIH0sCiAgICBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICAgIGlmICh0b2tlbikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgfQogICAgfSwKICAgIFNFVF9DSEFSR0lOR19TVEFUVVMoc3RhdGUsIHN0YXR1cykgewogICAgICBzdGF0ZS5jaGFyZ2luZ1N0YXR1cyA9IHN0YXR1czsKICAgIH0sCiAgICBTRVRfUVVFVUVfSU5GTyhzdGF0ZSwgaW5mbykgewogICAgICBzdGF0ZS5xdWV1ZUluZm8gPSBpbmZvOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgYXN5bmMgbG9naW4oewogICAgICBjb21taXQKICAgIH0sIHsKICAgICAgdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkCiAgICB9KSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgY29uc3QgdXNlckluZm8gPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHVzZXJJbmZvLnRva2VuKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIHVzZXJJbmZvKTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpOyAvLyDnoa7kv53nmbvlvZXmiJDlip/ml7YgcmVzb2x2ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlc3BvbnNlLmRhdGEubWVzc2FnZSB8fCAn55m75b2V5aSx6LSlJykpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOyAvLyDmjZXojrfplJnor68KICAgICAgfQogICAgfSwKICAgIGxvZ291dCh7CiAgICAgIGNvbW1pdAogICAgfSkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfVVNFUl9JTkZPJywgbnVsbCk7CiAgICAgIGNvbW1pdCgnU0VUX0NIQVJHSU5HX1NUQVRVUycsIG51bGwpOwogICAgICBjb21taXQoJ1NFVF9RVUVVRV9JTkZPJywgbnVsbCk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0xvZ2dlZEluOiBzdGF0ZSA9PiAhIXN0YXRlLnRva2VuLAogICAgdXNlckluZm86IHN0YXRlID0+IHN0YXRlLnVzZXJJbmZvLAogICAgdXNlcklkOiBzdGF0ZSA9PiBzdGF0ZS51c2VySW5mbyA/IHN0YXRlLnVzZXJJbmZvLmlkIDogbnVsbCwKICAgIGNoYXJnaW5nU3RhdHVzOiBzdGF0ZSA9PiBzdGF0ZS5jaGFyZ2luZ1N0YXR1cywKICAgIHF1ZXVlSW5mbzogc3RhdGUgPT4gc3RhdGUucXVldWVJbmZvCiAgfQp9KTs="},{"version":3,"names":["Vue","Vuex","login","use","Store","state","userInfo","JSON","parse","localStorage","getItem","token","chargingStatus","queueInfo","mutations","SET_USER_INFO","setItem","stringify","id","removeItem","SET_TOKEN","SET_CHARGING_STATUS","status","SET_QUEUE_INFO","info","actions","commit","username","password","response","data","code","Promise","resolve","reject","Error","message","error","logout","getters","isLoggedIn","userId"],"sources":["D:/git_project/ChargingSystem/user-client/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport { login } from '@/api/user'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    userInfo: JSON.parse(localStorage.getItem('userInfo')) || null,\r\n    token: localStorage.getItem('token') || '',\r\n    chargingStatus: null,\r\n    queueInfo: null,\r\n  },\r\n  mutations: {\r\n    SET_USER_INFO(state, userInfo) {\r\n      state.userInfo = userInfo\r\n      if (userInfo) {\r\n        localStorage.setItem('userInfo', JSON.stringify(userInfo))\r\n        localStorage.setItem('userId', userInfo.id)\r\n      } else {\r\n        localStorage.removeItem('userInfo')\r\n        localStorage.removeItem('userId')\r\n      }\r\n    },\r\n    SET_TOKEN(state, token) {\r\n      state.token = token\r\n      if (token) {\r\n        localStorage.setItem('token', token)\r\n      } else {\r\n        localStorage.removeItem('token')\r\n      }\r\n    },\r\n    SET_CHARGING_STATUS(state, status) {\r\n      state.chargingStatus = status\r\n    },\r\n    SET_QUEUE_INFO(state, info) {\r\n      state.queueInfo = info\r\n    },\r\n  },\r\n  actions: {\r\n    async login({ commit }, { username, password }) {\r\n      try {\r\n        const response = await login(username, password)\r\n        if (response.data.code === 200) {\r\n          const userInfo = response.data.data\r\n          commit('SET_TOKEN', userInfo.token)\r\n          commit('SET_USER_INFO', userInfo)\r\n          return Promise.resolve(response) // 确保登录成功时 resolve\r\n        } else {\r\n          return Promise.reject(new Error(response.data.message || '登录失败'))\r\n        }\r\n      } catch (error) {\r\n        return Promise.reject(error) // 捕获错误\r\n      }\r\n    },\r\n    logout({ commit }) {\r\n      commit('SET_TOKEN', '')\r\n      commit('SET_USER_INFO', null)\r\n      commit('SET_CHARGING_STATUS', null)\r\n      commit('SET_QUEUE_INFO', null)\r\n    },\r\n  },\r\n  getters: {\r\n    isLoggedIn: state => !!state.token,\r\n    userInfo: state => state.userInfo,\r\n    userId: state => (state.userInfo ? state.userInfo.id : null),\r\n    chargingStatus: state => state.chargingStatus,\r\n    queueInfo: state => state.queueInfo,\r\n  },\r\n})"],"mappings":"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","ignoreList":[]}]}